<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>To-do List</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4facfe">

<style>
body {
  font-family: sans-serif;
  background: linear-gradient(135deg,#4facfe,#00f2fe);
  height: 100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  margin:0;
}
.app {
  background:#fff;
  width:320px;
  border-radius:20px;
  padding:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.2);
}
h2{text-align:center}
.input-group{display:flex;gap:8px}
input{flex:1;padding:10px;border-radius:10px;border:1px solid #ccc}
button{border:none;border-radius:10px;padding:10px;background:#4facfe;color:#fff}
ul{list-style:none;padding:0;margin-top:10px}
li{background:#f5f5f5;margin-bottom:8px;padding:8px;border-radius:10px;display:flex;align-items:center}
.done{text-decoration:line-through;color:gray}
.small{font-size:12px;margin-top:10px;width:100%}
</style>
</head>

<body>
<div class="app">
<h2>üìù To-do List</h2>

<div class="input-group">
<input id="taskInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏á‡∏≤‡∏ô">
<button onclick="addTask()">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
</div>

<ul id="taskList"></ul>

<button class="small" onclick="testNotify()">üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
</div>

<script>
let tasks=[];

function addTask(){
  let t=taskInput.value.trim();
  if(!t) return;
  tasks.push({text:t,done:false});
  taskInput.value="";
  show();
}

function show(){
  taskList.innerHTML="";

  tasks.forEach((t,i)=>{
    let li=document.createElement("li");

    // checkbox
    let c=document.createElement("input");
    c.type="checkbox";
    c.checked=t.done;
    c.onclick=()=>{
      t.done=!t.done;
      show();
    };

    // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡∏≤‡∏ô
    let s=document.createElement("span");
    s.textContent=t.text;
    s.style.flex="1";
    s.style.marginLeft="8px";
    if(t.done) s.className="done";

    // ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
    let del=document.createElement("button");
    del.textContent="‡∏•‡∏ö";
    del.style.background="#ff4d4d";
    del.style.marginLeft="6px";
    del.onclick=()=>{
      tasks.splice(i,1); // ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å list
      show();
    };

    li.append(c,s,del);
    taskList.appendChild(li);
  });
}

function testNotify(){
  Notification.requestPermission().then(p=>{
    if(p==="granted"){
      navigator.serviceWorker.ready.then(reg=>{
        reg.showNotification("To-do List",{
          body:"‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏Å‡∏£‡∏µ‡∏ô üîî",
          icon:"icon.png"
        });
      });
    }
  });
}

if("serviceWorker"in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
