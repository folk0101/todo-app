<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>To-do App</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4facfe">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#4facfe,#00f2fe);
  font-family:sans-serif;
}
.app{
  width:360px;
  background:rgba(255,255,255,.95);
  backdrop-filter:blur(10px);
  border-radius:26px;
  padding:22px;
  box-shadow:0 25px 40px rgba(0,0,0,.25);
  animation:pop .4s ease;
}
@keyframes pop{
  from{transform:scale(.9);opacity:0}
  to{transform:scale(1);opacity:1}
}
h2{
  text-align:center;
  margin:0 0 14px;
}
.input-group{
  display:flex;
  gap:10px;
}
input{
  flex:1;
  padding:14px;
  border-radius:14px;
  border:1px solid #ddd;
  font-size:15px;
}
.add{
  padding:14px 18px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#4facfe,#00c6ff);
  color:white;
  font-weight:bold;
  cursor:pointer;
}
ul{
  list-style:none;
  padding:0;
  margin:16px 0;
}
li{
  background:white;
  margin-bottom:10px;
  padding:12px;
  border-radius:16px;
  display:flex;
  align-items:center;
  box-shadow:0 6px 14px rgba(0,0,0,.1);
  animation:slide .3s ease;
}
@keyframes slide{
  from{transform:translateY(10px);opacity:0}
  to{transform:translateY(0);opacity:1}
}
.done{
  text-decoration:line-through;
  color:gray;
}
.task-text{
  flex:1;
  margin-left:10px;
  font-size:15px;
}
.del{
  background:#ff5252;
  border:none;
  border-radius:50%;
  width:32px;
  height:32px;
  color:white;
  font-size:16px;
  cursor:pointer;
}
.notify{
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,#00c853,#00e676);
  color:white;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="app">
  <h2>üìù To-do List</h2>

  <div class="input-group">
    <input id="taskInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥">
    <button class="add" onclick="addTask()">Ôºã</button>
  </div>

  <ul id="taskList"></ul>

  <button class="notify" onclick="sendNotify()">üîî ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
</div>

<script>
let tasks=[];

function addTask(){
  const text=taskInput.value.trim();
  if(!text) return;
  tasks.push({text,done:false});
  taskInput.value="";
  render();
}

function render(){
  taskList.innerHTML="";
  tasks.forEach((t,i)=>{
    const li=document.createElement("li");

    const cb=document.createElement("input");
    cb.type="checkbox";
    cb.checked=t.done;
    cb.onchange=()=>{
      t.done=!t.done;
      render();
    };

    const span=document.createElement("span");
    span.textContent=t.text;
    span.className="task-text"+(t.done?" done":"");

    const del=document.createElement("button");
    del.textContent="‚úï";
    del.className="del";
    del.onclick=()=>{
      tasks.splice(i,1);
      render();
    };

    li.append(cb,span,del);
    taskList.appendChild(li);
  });
}

async function sendNotify(){
  const permission = await Notification.requestPermission();
  if(permission!=="granted") return;

  const reg = await navigator.serviceWorker.ready;
  reg.showNotification("To-do List üîî",{
    body:"‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥",
    icon:"icon.png",
    badge:"icon.png",
    requireInteraction:true
  });
}

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
