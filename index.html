<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>To-do App</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4facfe">

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#4facfe,#00f2fe);
  font-family:sans-serif;
}
.app{
  width:340px;
  background:#fff;
  border-radius:22px;
  padding:20px;
  box-shadow:0 15px 30px rgba(0,0,0,.25);
}
h2{text-align:center;margin:0 0 10px}
.input-group{
  display:flex;
  gap:8px;
}
input{
  flex:1;
  padding:12px;
  border-radius:12px;
  border:1px solid #ddd;
}
button{
  padding:12px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#4facfe,#00f2fe);
  color:white;
  cursor:pointer;
}

ul{
  list-style:none;
  padding:0;
  margin-top:12px;
}
li{
  background:#f4f6f8;
  margin-bottom:8px;
  padding:10px;
  border-radius:12px;
  display:flex;
  align-items:center;
}
.done{
  text-decoration:line-through;
  color:gray;
}
.notify{
  margin-top:10px;
  width:100%;
  background:#00c853;
}
</style>
</head>

<body>
<div class="app">
  <h2>üìù To-do List</h2>

  <div class="input-group">
    <input id="taskInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥">
    <button onclick="addTask()">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
  </div>

  <ul id="taskList"></ul>

  <button class="notify" onclick="sendNotify()">üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
</div>

<script>
let tasks=[];

function addTask(){
  const text=taskInput.value.trim();
  if(!text) return;
  tasks.push({text,done:false});
  taskInput.value="";
  render();
}

function render(){
  taskList.innerHTML="";
  tasks.forEach((t,i)=>{
    const li=document.createElement("li");

    const cb=document.createElement("input");
    cb.type="checkbox";
    cb.checked=t.done;
    cb.onchange=()=>{
      t.done=!t.done;
      render();
    };

    const span=document.createElement("span");
    span.textContent=t.text;
    span.style.flex="1";
    span.style.marginLeft="8px";
    if(t.done) span.className="done";

    const del=document.createElement("button");
    del.textContent="‚úñ";
    del.style.background="#ff5252";
    del.onclick=()=>{
      tasks.splice(i,1);
      render();
    };

    li.append(cb,span,del);
    taskList.appendChild(li);
  });
}

async function sendNotify(){
  const permission = await Notification.requestPermission();
  if(permission!=="granted") return;

  const reg = await navigator.serviceWorker.ready;
  reg.showNotification("To-do List üîî",{
    body:"‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥",
    icon:"icon.png",
    badge:"icon.png",
    requireInteraction:true
  });
}

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
